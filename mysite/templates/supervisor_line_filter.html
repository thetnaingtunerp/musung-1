{% extends 'base.html' %}

{% block content %}

<form method="post" action="{% url 'myapp:supervisor_result_filter' %}">{% csrf_token %}
    <div class="row m-3 p-3">
      <div class="col">
         <label class="form-label">Start Date</label>
        <input type="date" class="form-control" name="fdate">
      </div>
      <div class="col">
         <label class="form-label">End Date</label>
        <input type="date" class="form-control" name="tdate">
      </div>      
      <div class="col">
         <label class="form-label">.</label>
        <input type="number" class="form-control" name="lid" value="{{ln}}" hidden>
        <input type="submit" class="form-control btn btn-md btn-primary">
      </div>
      
    </div>
  </form>

<hr>

<div>            
{% for operator in op %}



<table class="bg-white table-responsive">
   <tbody>
   <tr>
      <td class="h5 p-2">{{forloop.counter}}</td>
      <td style="min-width: 200px; max-width: 200px;" class="p-3 text-primary">{{operator.name}}<br><span class="text-dark">-{{operator.point}}</span></td>
      {% for entry in operator.daily_report_set.all %}

      {% if entry.created_date < first_date %}
      {% else %}
      
      <td width="130px;" class="">
         <table width="130px">
            <tr class="border">
               <td class="">{{entry.created_date}}</td>
            </tr>
            <tr class="border">
               {% if entry.target_per < 30 %}
               <td class=" bg-danger text-center">{{entry.target_per}}%</td>
               {% elif entry.target_per > 100 %}
               <td class=" bg-success text-center">{{entry.target_per}}%</td>
               {% elif entry.target_per > 80 %}
               <td class=" bg-warning text-center">{{entry.target_per}}%</td>
               
               {% else %}
               <td class=" text-center">{{entry.target_per}}%</td>
               {% endif %}
            </tr>
            <tr class="border">
               <td class="text-center"><span class="text-primary h6">{{entry.target_qty}}</span>/ <span class="h6">{{entry.target}}</span> </td>
            </tr>
         </table>
      
      </td>
      
      
      {% endif %}
      
      {% endfor %}
   </tr>
   <!-- <hr> -->
</tbody>
</table>
<hr>


{% endfor %}

</div>

{% endblock content %}
